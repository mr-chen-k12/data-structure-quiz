<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>✨ Data Structures Quiz (Improved + Fix) ✨</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #1e1e1e;
        color: #e0e0e0;
        padding: 20px;
      }
      h1 {
        text-align: center;
        color: #f39c12;
      }
      .question {
        background-color: #2c2c2c;
        border-left: 5px solid #f39c12;
        padding: 16px;
        margin-bottom: 20px;
        border-radius: 8px;
      }
      .question pre {
        background: none;
        padding: 0;
        margin: 0 0 10px 0;
        color: #e0e0e0;
      }
      .answer {
        display: none;
        background-color: #333;
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
      }
      button {
        background-color: #f39c12;
        border: none;
        padding: 8px 14px;
        color: #1e1e1e;
        font-weight: bold;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background-color: #e67e22;
      }
      .toggle-buttons {
        text-align: center;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>✨ Data Structures Quiz ✨</h1>
    <div class="toggle-buttons">
      <button onclick="toggleAll(true)">Toggle All On</button>
      <button onclick="toggleAll(false)">Toggle All Off</button>
    </div>
    <div id="quiz-container"></div>

    <script>
      const questions = [
        {
          question: "What does the Bubble Sort algorithm do?",
          answer:
            "Repeatedly steps through the list, compares adjacent elements, and swaps them if they are in the wrong order.",
        },
        {
          question: "What is the best-case time complexity of Bubble Sort?",
          answer: "O(n)",
        },
        {
          question: "What is the average-case time complexity of Bubble Sort?",
          answer: "O(n^2)",
        },
        {
          question: "What is the worst-case time complexity of Bubble Sort?",
          answer: "O(n^2)",
        },
        {
          question: "Implement Bubble Sort in JavaScript.",
          answer:
            "function bubbleSort(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        for (let j = 0; j < arr.length - i - 1; j++) {\n            if (arr[j] > arr[j + 1]) {\n                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\n            }\n        }\n    }\n    return arr;\n}",
        },
        {
          question:
            "function d(a) {\n    for (let b = 0; b < a.length; b++) {\n        for (let c = 0; c < a.length - b - 1; c++) {\n            if (a[c] > a[c + 1]) {\n                [a[c], a[c + 1]] = [a[c + 1], a[c]];\n            }\n        }\n    }\n    return a;\n}",
          answer: "What algorithm is implemented above?\nAnswer: Bubble Sort",
        },
        {
          question: "What does the Merge Sort algorithm do?",
          answer:
            "A divide-and-conquer algorithm that divides the array into halves, sorts them, and merges them back.",
        },
        {
          question: "What is the best-case time complexity of Merge Sort?",
          answer: "O(n log n)",
        },
        {
          question: "What is the average-case time complexity of Merge Sort?",
          answer: "O(n log n)",
        },
        {
          question: "What is the worst-case time complexity of Merge Sort?",
          answer: "O(n log n)",
        },
        {
          question: "Implement Merge Sort in JavaScript.",
          answer:
            "function mergeSort(arr) {\n    if (arr.length <= 1) return arr;\n    const mid = Math.floor(arr.length / 2);\n    const left = mergeSort(arr.slice(0, mid));\n    const right = mergeSort(arr.slice(mid));\n    return merge(left, right);\n}\nfunction merge(left, right) {\n    const result = [];\n    while (left.length && right.length) {\n        result.push(left[0] < right[0] ? left.shift() : right.shift());\n    }\n    return result.concat(left, right);\n}",
        },
        {
          question:
            "function f(g) {\n    if (g.length <= 1) return g;\n    const j = Math.floor(g.length / 2);\n    const h = f(g.c(0, j));\n    const e = f(g.c(j));\n    return a(h, e);\n}\nfunction a(h, e) {\n    const d = [];\n    while (h.length && e.length) {\n        d.k(h[0] < e[0] ? h.b() : e.b());\n    }\n    return d.i(h, e);\n}",
          answer: "What algorithm is implemented above?\nAnswer: Merge Sort",
        },
        {
          question: "What does the Linear Search algorithm do?",
          answer:
            "Checks each element of the list until it finds the target value.",
        },
        {
          question: "What is the best-case time complexity of Linear Search?",
          answer: "O(1)",
        },
        {
          question:
            "What is the average-case time complexity of Linear Search?",
          answer: "O(n)",
        },
        {
          question: "What is the worst-case time complexity of Linear Search?",
          answer: "O(n)",
        },
        {
          question: "Implement Linear Search in JavaScript.",
          answer:
            "function linearSearch(arr, target) {\n    for (let i = 0; i < arr.length; i++) {\n        if (arr[i] === target) return i;\n    }\n    return -1;\n}",
        },
        {
          question:
            "function c(a, d) {\n    for (let b = 0; b < a.length; b++) {\n        if (a[b] === d) return b;\n    }\n    return -1;\n}",
          answer: "What algorithm is implemented above?\nAnswer: Linear Search",
        },
        {
          question: "What does the Binary Search algorithm do?",
          answer:
            "Repeatedly divides a sorted array in half to find a target value.",
        },
        {
          question: "What is the best-case time complexity of Binary Search?",
          answer: "O(1)",
        },
        {
          question:
            "What is the average-case time complexity of Binary Search?",
          answer: "O(log n)",
        },
        {
          question: "What is the worst-case time complexity of Binary Search?",
          answer: "O(log n)",
        },
        {
          question: "Implement Binary Search in JavaScript.",
          answer:
            "function binarySearch(arr, target) {\n    let left = 0, right = arr.length - 1;\n    while (left <= right) {\n        let mid = Math.floor((left + right) / 2);\n        if (arr[mid] === target) return mid;\n        else if (arr[mid] < target) left = mid + 1;\n        else right = mid - 1;\n    }\n    return -1;\n}",
        },
        {
          question:
            "function d(b, e) {\n    let a = 0, f = b.length - 1;\n    while (a <= f) {\n        let c = Math.floor((a + f) / 2);\n        if (b[c] === e) return c;\n        else if (b[c] < e) a = c + 1;\n        else f = c - 1;\n    }\n    return -1;\n}",
          answer: "What algorithm is implemented above?\nAnswer: Binary Search",
        },
      ];

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      function toggleAnswer(id) {
        const el = document.getElementById(id);
        el.style.display = el.style.display === "none" ? "block" : "none";
      }

      function toggleAll(show) {
        document.querySelectorAll(".answer").forEach((el) => {
          el.style.display = show ? "block" : "none";
        });
      }

      function detectCode(text) {
        return (
          text.includes("function") ||
          text.includes("return") ||
          text.includes("for") ||
          text.includes("let") ||
          text.includes("const") ||
          text.includes("=>")
        );
      }

      function escapeHTML(str) {
        return str
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;");
      }

      function loadQuiz() {
        shuffle(questions);
        const container = document.getElementById("quiz-container");
        container.innerHTML = "";
        questions.forEach((qa, index) => {
          const qDiv = document.createElement("div");
          qDiv.className = "question";

          const qText = document.createElement("pre");
          const isQCode = detectCode(qa.question);
          qText.innerHTML = `<code class="language-javascript">${escapeHTML(
            isQCode ? qa.question : "// " + qa.question
          )}</code>`;
          qDiv.appendChild(qText);

          const btn = document.createElement("button");
          btn.textContent = "Show/Hide Answer";
          btn.onclick = () => toggleAnswer("ans" + index);
          qDiv.appendChild(btn);

          const aText = document.createElement("pre");
          aText.id = "ans" + index;
          aText.className = "answer";
          const isACode = detectCode(qa.answer);
          aText.innerHTML = `<code class="language-javascript">${escapeHTML(
            isACode ? qa.answer : "// " + qa.answer
          )}</code>`;

          qDiv.appendChild(aText);
          container.appendChild(qDiv);
        });
        Prism.highlightAll();
      }

      window.onload = loadQuiz;
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  </body>
</html>
